<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Messages ‚Ä¢ Pepsval</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" href="/assets/logo.webp" />
  <link rel="stylesheet" href="/css/style.css?v=3001">
  <link rel="stylesheet" href="/messages/messages.css?v=20260203-instagram-ui">
  <script>
    (function () {
      const theme = localStorage.getItem('theme') || 'light';
      if (theme === 'dark') document.documentElement.classList.add('dark-mode');
    })();
  </script>
</head>

<body class="app-bg">
  <div class="app-container">
    <!-- Sidebar (Desktop) -->
    <aside class="sidebar">
      <a href="/feed/index.html" class="sidebar-logo">Pepsval</a>

      <nav style="display: flex; flex-direction: column; gap: 4px;">
        <a class="navItem" href="/feed/index.html">
          <span>üè†</span>
          <span>Feed</span>
        </a>
        <a class="navItem" href="/jobs/index.html">
          <span>‚öì</span>
          <span>Jobs</span>
        </a>
        <a class="navItem active" href="/messages/index.html">
          <span>üí¨</span>
          <span>Chats</span>
        </a>
        <a class="navItem" href="/profile/home.html">
          <span>üë§</span>
          <span>Profile</span>
        </a>
        <a class="navItem" href="/dashboard/settings.html">
          <span>‚öôÔ∏è</span>
          <span>Settings</span>
        </a>
      </nav>

      <div style="margin-top: auto; padding: 12px;">
        <button id="sidebarLogout" class="pv-btn pv-btn-ghost"
          style="width: 100%; color: var(--danger); border-color: var(--stroke);">Logout</button>
      </div>
    </aside>

    <div class="main-content">
      <div class="app">
        <header class="topbar">
          <div class="topLeft">
            <a href="/feed/index.html" style="text-decoration:none">
              <div class="brandName">Pepsval</div>
            </a>
          </div>

          <div class="topRight">
            <button id="meAvatarBtn" class="avatarBtn" type="button">
              <img class="avatar" src="/assets/logo.webp" alt="Me" />
            </button>
          </div>
        </header>

        <div class="toggle" style="margin-top: 12px; padding: 0 16px;">
          <button id="tabCommunity" class="active">Community</button>
          <button id="tabMessages">Messages</button>
          <button id="tabNotifications">Notifications <span id="notifCount">0</span></button>
        </div>

        <main id="list" class="list"></main>

        <!-- Chat Input (Instagram Style) -->
        <div id="chatInputWrap" class="chatInputWrap" style="display:none;">
          <div id="chatInputContainer" class="chat-input-container">
            <!-- Text Input with Emoji -->
            <div class="input-field-wrapper">
              <input id="chatInput" type="text" placeholder="Message..." autocomplete="off" />

              <!-- Emoji Picker Button -->
              <button id="emojiBtn" class="icon-btn-inline" title="Emoji" type="button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10" />
                  <path d="M8 14s1.5 2 4 2 4-2 4-2" />
                  <line x1="9" y1="9" x2="9.01" y2="9" />
                  <line x1="15" y1="9" x2="15.01" y2="9" />
                </svg>
              </button>
            </div>

            <!-- Voice/Send Button (toggles based on input) -->
            <button id="voiceBtn" class="icon-btn" title="Voice message" type="button">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                <line x1="12" y1="19" x2="12" y2="23" />
                <line x1="8" y1="23" x2="16" y2="23" />
              </svg>
            </button>

            <button id="sendBtn" class="send-btn" type="button" style="display:none;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
              </svg>
            </button>
          </div>

          <!-- Emoji Picker Popup -->
          <div id="emojiPicker" class="emoji-picker" style="display:none;">
            <div class="emoji-grid" id="emojiGrid"></div>
          </div>

          <!-- Voice Recording UI -->
          <div id="voiceRecordingUI" class="voice-recording-ui" style="display:none;">
            <div class="recording-indicator">
              <div class="pulse-dot"></div>
              <span id="recordingTime">0:00</span>
            </div>
            <button id="cancelRecording" class="cancel-btn" type="button">Cancel</button>
            <button id="sendRecording" class="send-recording-btn" type="button">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/messages/messages.js?v=20260203-instagram-ui-v2"></script>

  <nav class="bottomNav glass">
    <a class="navItem" href="/feed/index.html">
      <span>üè†</span>
      <span>Feed</span>
    </a>
    <a class="navItem" href="/jobs/index.html">
      <span>‚öì</span>
      <span>Jobs</span>
    </a>
    <a class="navItem active" href="/messages/index.html">
      <span>üí¨</span>
      <span>Chats</span>
    </a>
    <a class="navItem" href="/profile/home.html">
      <span>üë§</span>
      <span>Profile</span>
    </a>
  </nav>

</body>

</html>